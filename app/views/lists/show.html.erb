<div class="d-flex flex-row justify-content-between align-items-center mb-3">
  <h1 class='ms-2 flex-grow-1'><%= @list.name %></h1>
  <form class="row row-cols-lg-auto g-3 align-items-center simple_form new_bookmark" id="new_bookmark" novalidate="novalidate"
  action="/lists/4/bookmarks" accept-charset="UTF-8" method="post">
    <div class="col-12 string optional bookmark_comment">
      <label class="visually-hidden form-label string optional" for="bookmark_comment">Comment</label>
      <input type="text" class="form-control string optional" id="bookmark_comment" name='bookmark[comment]'
      placeholder='Comment'>
    </div>

    <div class="col-12 select optional bookmark_movie">
      <label class="form-label select optional visually-hidden" for="bookmark_movie_id">Movie</label>
      <select class="form-select select optional" name="bookmark[movie_id]" id="bookmark_movie_id">
        <option value label="Choose a movie"></option>
        <% movies = Movie.all %>
        <% c = 1 %>
        <% movies.each do |movie| %>
          <option value="<%=c%>"><%= movie.title %></option>
          <% c += 1 %>
        <% end %>
      </select>
    </div>

    <div class="col-12">
      <input type="submit" name="commit" value="Add" class="btn btn-primary" data-disable-with="Create Bookmark">
    </div>
  </form>
  <%= link_to 'Back to lists', root_path, class: 'ms-3 btn btn-secondary d-flex align-items-center' %>
</div>
  <%# <%= link_to 'Add a bookmark', new_list_bookmark_path(@list), class: 'btn btn-primary d-flex align-items-center' %>

<hr class='mt-3 mb-4'>

<div class="row row-cols-1 row-cols-md-2 g-4">
  <% @list.bookmarks.each do |bookmark| %>
    <div class="col-lg-6 col-md-12">
      <div class="card h-100" style="max-width: 540px;">
        <div class="row g-0">
          <div class="col-4 h-100">
            <img src="<%= bookmark.movie.poster_url %>" class="img-fluid rounded-start" style="height: 100%;"alt="...">
          </div>
          <div class="col-8">
            <div class="d-flex flex-column card-body h-100">
              <div class='d-flex align-items-start text-left mb-2'>
                <h5 class="card-title flex-grow-1 mb-0"><%= bookmark.movie.title %></h5>
                <div class="d-flex flex-row align-items-center">
                  <i class='fa-solid fa-star text-warning'></i>
                  <span><%= bookmark.movie.rating.round(1) %></span>
                </div>
              </div>
              <div>
                <p class="card-text" style='display: -webkit-box; -webkit-line-clamp: 6; -webkit-box-orient:  vertical; overflow: hidden;'><%= bookmark.movie.overview %></p>
              </div>
              <div class="mt-auto d-flex">
                <i class="fa-solid fa-quote-left"></i>
                <span class="card-text ms-2 flex-grow-1 text-truncate"><small class="text-muted"><%=bookmark.comment%></small></span>
                <%= link_to "",
                  bookmark_path(bookmark),
                  data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: 'fa-regular fa-trash-can text-decoration-none text-danger' %>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  <% end %>
</div>
